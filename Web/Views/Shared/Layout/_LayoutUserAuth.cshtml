@using System.Security.Claims
@using CoreLibrary.Models.ConditionalExpressions.Expansion
@using Web.Models
<!DOCTYPE html>
<html lang="ru" style="background: var(--bs-white);">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>@ViewData["Title"] - IntelliTrackSolutions</title>
    <link rel="canonical" href="@ViewData[" Url_Domen"]"/>
    <meta property="og:url" content="@ViewData[" Url_Domen"]">
    <meta name="twitter:title" content="IntelliTrack Solutions">
    <meta name="twitter:image" content="/img/webLogo/favicon.png">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/img/webLogo/favicon.png">
    <meta name="description" content="IntelliTrack Solutions: Инновационные решения для геопозиционирования и управления информационными объектами.">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="IntelliTrack Solutions: Инновационные решения для геопозиционирования и управления информационными объектами.">

    <link rel="icon" type="image/png" sizes="512x512" href="~/img/webLogo/favicon.png?h=fd1ff92a7ceb3bd2dda94ea3792eb55c">
    <link rel="icon" type="image/png" sizes="512x512" href="~/img/webLogo/favicon.png?h=fd1ff92a7ceb3bd2dda94ea3792eb55c">
    <link rel="icon" type="image/png" sizes="512x512" href="~/img/webLogo/favicon.png?h=fd1ff92a7ceb3bd2dda94ea3792eb55c">
    <link rel="icon" type="image/png" sizes="512x512" href="~/img/webLogo/favicon.png?h=fd1ff92a7ceb3bd2dda94ea3792eb55c">
    <link rel="icon" type="image/png" sizes="512x512" href="~/img/webLogo/favicon.png?h=fd1ff92a7ceb3bd2dda94ea3792eb55c">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" asp-href-include="~/css/**/*.css"/>
    <link rel="stylesheet" asp-href-include="~/lib/**/*.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
</head>

<body id="page-top" style="width: 100%;height: 100%;">
@{ await Html.RenderPartialAsync("ModalWindow/ShowModalWindow", ViewData["ModalWindow"] != null ? (ModalWindow)ViewData["ModalWindow"]! : null); }
<div id="wrapper" style="width: 100%;height: 100%;">
    <nav class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0">
        <div class="container-fluid d-flex flex-column p-0">
            <a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0" asp-controller="Home" asp-action="Index" style="position: relative;width: auto;padding-right: 100px;">
                <div class="text-start sidebar-brand-text mx-3" style="width: 100%;height: 100%;">
                    <span class="text-start" style="width: 100%;height: 100%;">Intelli Track</span>
                </div>
            </a>
            <ul class="navbar-nav text-light d-xxl-flex justify-content-xxl-start align-items-xxl-start" id="accordionSidebar" style="width: 100%;height: 100%;margin-right: 40%;">
                <li class="nav-item">
                    @* <a class="nav-link @ViewData["Active_Monitor_Link"]" asp-controller="InformationSystem" asp-action="Monitoring"> *@
                    @*     <i class="fas fa-tachometer-alt"></i><span>Панель мониторинга</span> *@
                    @* </a> *@
                </li>

                <li class="nav-item">
                    <a class="nav-link @ViewData["Active_Profile_Link"]" asp-controller="Users" asp-action="Edit">
                        <i class="far fa-user"></i><span>Профиль</span>&nbsp;
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link @ViewData["Active_TableData_Link"]" asp-controller="" asp-action="">
                        <i class="fas fa-database"></i><span>Таблица данных ИС</span>&nbsp;
                    </a>
                </li>

                @if (User.GetClaimIssuer(ClaimTypes.System) != null)
                {
                    <li class="nav-item">
                        @* <a class="nav-link @ViewData["Active_LocationTableData_Link"]" asp-controller="Map" asp-action="MarkerTableData"> *@
                        @*     <i class="fas fa-database"></i><span>Таблица данных локаций</span>&nbsp; *@
                        @* </a> *@
                    </li>

                    <li class="nav-item">
                        <a class="nav-link @ViewData["Active_SystemObjectTableData_Link"]" asp-controller="" asp-action="">
                            <i class="fas fa-database"></i><span>Таблица данных СО</span>&nbsp;
                        </a>
                    </li>

                    @if (int.Parse(User.GetClaimIssuer(ClaimTypes.PrimaryGroupSid)!.Value) >= 5)
                    {
                        <li class="nav-item">
                            <a class="nav-link @ViewData["Active_UserTableData_Link"]" asp-controller="Users" asp-action="UserTableData">
                                <i class="fas fa-address-card"></i><span>Таблица данных пользователей</span>&nbsp;
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link @ViewData["Active_ChatTableData_Link"]" asp-controller="" asp-action="">
                                <i class="fas fa-comments"></i><span>Таблица чатов</span>&nbsp;
                            </a>
                        </li>
                    }

                    @if (User.IsInOrganization(1) && int.Parse(User.GetClaimIssuer(ClaimTypes.PrimaryGroupSid)!.Value) >= 5)
                    {
                        <li class="nav-item">
                            <a class="nav-link @ViewData["Active_IS_Table_Link"]" asp-controller="InformationSystem" asp-action="Monitoring">
                                <i class="far fa-hdd"></i><span>Упр. подключёнными ИС</span>
                            </a>
                        </li>
                    }

                    <li class="nav-item">
                        @* <a class="nav-link @ViewData["Active_Map_Link"]" asp-controller="Map" asp-action="Map"> *@
                        @*     <i class="fas fa-map-marked-alt"></i><span>Карта объектов ИС</span>&nbsp; *@
                        @* </a> *@
                    </li>
                }

                <li class="nav-item">
                    <a class="nav-link" asp-controller="Home" asp-action="Index">
                        <i class="far fa-arrow-alt-circle-left"></i><span>Вернуться</span>&nbsp;
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="d-flex flex-column" id="content-wrapper" style="width: 100%; height: 100%;">
        <div id="content" style="width: 100%; height: 100%;">
            @(RenderBody())
        </div>
        <footer class="bg-white sticky-footer">
            <div class="container my-auto">
                <div class="text-center my-auto copyright">
                    <span>Copyright © IntelliTrackSolutions 2023</span>
                </div>
            </div>
        </footer>
    </div>
</div>


@(await RenderSectionAsync("Scripts", false))
<script asp-src-include="~/lib/**/*.js"></script>
<script asp-src-include="~/js/**/*.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
</body>
</html>